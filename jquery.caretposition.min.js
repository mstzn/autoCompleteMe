!function(t,e,o,r){t(function(){var e={primaryStyles:["fontFamily","fontSize","fontWeight","fontVariant","fontStyle","paddingLeft","paddingTop","paddingBottom","paddingRight","marginLeft","marginTop","marginBottom","marginRight","borderLeftColor","borderTopColor","borderBottomColor","borderRightColor","borderLeftStyle","borderTopStyle","borderBottomStyle","borderRightStyle","borderLeftWidth","borderTopWidth","borderBottomWidth","borderRightWidth","line-height","outline"],specificStyle:{"word-wrap":"break-word","overflow-x":"hidden","overflow-y":"auto"},simulator:t('<div id="textarea_simulator" contenteditable="true"/>').css({position:"absolute",top:0,left:0,visibility:"hidden"}).appendTo(o.body),toHtml:function(t){return t.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\n/g,"<br>").replace(/(\s)/g,'<span style="white-space:pre-wrap;">$1</span>')},getCaretPosition:function(){var o=e,r=this,i=r[0];r.offset();o.simulator.empty(),t.each(o.primaryStyles,function(t,e){r.cloneStyle(o.simulator,e)}),o.simulator.css(t.extend({width:r.width(),height:r.height()},o.specificStyle));var n=r.val(),a=r.getCursorPosition(),l=n.substring(0,a),s=n.substring(a),f=t('<span class="before"/>').html(o.toHtml(l)),d=t('<span class="focus"/>'),p=t('<span class="after"/>').html(o.toHtml(s));o.simulator.append(f).append(d).append(p);var c=d.offset(),u=o.simulator.offset();return{top:c.top-u.top-i.scrollTop+parseInt(r.getComputedStyle("fontSize")),left:d[0].offsetLeft-o.simulator[0].offsetLeft-i.scrollLeft}}};t.fn.extend({getComputedStyle:function(t){if(0!=this.length){var e=this[0],r=this.css(t);return r=r||o.defaultView.getComputedStyle(e,null)[t]}},cloneStyle:function(e,o){var r=this.getComputedStyle(o);r&&t(e).css(o,r)},cloneAllStyle:function(t,e){var o=this[0];for(var r in o.style){var i=o.style[r];("string"==typeof i||"number"==typeof i)&&this.cloneStyle(t,r)}},getCursorPosition:function(){var t=this[0],e=0;if("selectionStart"in t)e=t.selectionStart;else if("selection"in o){var r=o.selection.createRange(),i=o.body.createTextRange();for(i.moveToElementText(t);i.compareEndPoints("StartToStart",r)<0;e++)i.moveStart("character",1);for(var n=0;n<=e;n++)"\n"==t.value.charAt(n)&&e++;return e-=t.value.split("\n").length-1}return e},getCaretPosition:e.getCaretPosition})})}(jQuery,window,document);
